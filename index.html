<html>
<head>
	<title>Rails API Token Auth Tiddle + Devise + AngularJS</title>
	<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body ng-app="myApp">
	
	<div ng-controller="myCtrl" ng-init="user_credentials()">
		<div ng-show="user_credentials()" class="ng-cloak">
			<button type="button" ng-click="logout()">Log out</button>&nbsp;
			<button type="button" ng-click="getPosts()">Get Posts</button><br><br>

			<form ng-submit="createPost()">
				<label>Body</label><br>
				<textarea ng-model="post.body"></textarea><br>
				<label>Photo</label><br>
				<input ng-model="post.photo" type="file" ngf-select><br><br>
				<input type="submit" value="Create post"><br>
			</form>

			<ul>
				<li ng-repeat="post in posts">
					<img ng-src="{{api_server + post.photo.url}}">
					<p>{{post.body}}</p>
					<button type="button" ng-click="delete(post.id)">Delete</button>
					<hr ng-show="{{ $index < (posts.length - 1) }}">
				</li>
			</ul>
		</div>

		<div ng-hide="user_credentials()">
			<form ng-submit="login()">
				<label>Email</label><br>
				<input type="text" ng-model="user.email"><br>
				<label>Password</label><br>
				<input type="text" ng-model="user.password"><br><br>
				<input type="submit" value="Login"><br>
			</form>
		</div>
	</div>

	<script src="js/angular.min.js"></script>
	<script src="js/ng-file-upload-shim.min.js"></script>
	<script src="js/ng-file-upload.min.js"></script>
	<script src="js/angular-local-storage.min.js"></script>
	<script src="js/app.js"></script>
	<script src="js/my_controller.js"></script>
	<script src="js/auth_factory.js"></script>
	<script src="js/post_factory.js"></script>
</body>
</html>
